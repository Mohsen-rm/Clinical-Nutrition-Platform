# ๐ฐ ูุธุงู ุงูุนูููุงุช 30% - ุฏููู ุงูุชุดุบูู ุงููุงูู

## โ ุชู ุฅููุงู ุงููุธุงู ุจูุฌุงุญ!

ุชู ุฅูุดุงุก ูุธุงู ุนูููุงุช ุดุงูู ูููุฑ **30% ุนูููุฉ ูุชูุฑุฑุฉ** ููุดุฑูุงุก ุนูู ูู ุงุดุชุฑุงู.

## ๐ ุงูุฃุฏูุงุช ุงููุชุงุญุฉ

### 1. ุงูุณูุฑูุจุช ุงูุชููุงุฆู (ุงูุฃุณุงุณู)
```bash
# ูุนุงูุฌุฉ ุฌููุน ุงูุนูููุงุช ุงูุฌุฏูุฏุฉ
python process_affiliate_commissions.py

# ุนุฑุถ ุชูุฑูุฑ ููุท
python process_affiliate_commissions.py report

# ุฏูุน ุนูููุงุช ุดุฑูู ูุนูู
python process_affiliate_commissions.py pay admin@example.com
```

### 2. ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ (ููุงุณุชุฎุฏุงู ุงููููู)
```bash
# ููุฎุต ุณุฑูุน
python quick_commission_commands.py summary

# ุฏูุน ุฌููุน ุงูุนูููุงุช ุงููุนููุฉ
python quick_commission_commands.py pay_all

# ุฏูุน ุนูููุงุช ุดุฑูู ูุนูู
python quick_commission_commands.py pay admin@example.com

# ุชูุงุตูู ุดุฑูู
python quick_commission_commands.py details admin@example.com
```

### 3. ุงููุฏูุฑ ุงููุฏูู ุงูุชูุงุนูู (ููุฅุฏุงุฑุฉ ุงููุชูุฏูุฉ)
```bash
# ูุงุฌูุฉ ุชูุงุนููุฉ ูุงููุฉ
python manual_commission_manager.py
```

### 4. ููุงู Celery ุงูุชููุงุฆูุฉ (ููุฅูุชุงุฌ)
```bash
# ุชุดุบูู ุงูุนุงูู
celery -A clinical_platform worker -l info

# ุชุดุบูู ุงููุฌุฏูู
celery -A clinical_platform beat -l info
```

## ๐ ูุซุงู ุนูู ุงููุชุงุฆุฌ

### ุชูุฑูุฑ ุงูุนูููุงุช ุงูุญุงูู:
```
๐ ุฅุฌูุงูู ุงูุนูููุงุช: 4
โณ ุงูุนูููุงุช ุงููุนููุฉ: 0 ($0.00)
โ ุงูุนูููุงุช ุงููุฏููุนุฉ: 4 ($41.10)

๐ ุฃูุถู ุงูุดุฑูุงุก:
1. admin@example.com: $26.10 (1 ุฅุญุงูุงุช)
2. doctor@example.com: $15.00 (0 ุฅุญุงูุงุช)
```

### ูุนุงูุฌุฉ ุชููุงุฆูุฉ:
```
๐ ุจุฏุก ูุนุงูุฌุฉ ุงูุนูููุงุช ุงูุชููุงุฆู
๐ ุชู ุงูุนุซูุฑ ุนูู 2 ูุฏููุนุฉ ุฌุฏูุฏุฉ
๐ฐ ูุนุงูุฌุฉ ุนูููุฉ: admin@example.com
   ุงููุจูุบ ุงูุฃุตูู: $29.00
   ุงูุนูููุฉ (30%): $8.70
โ ุชู ุฅูุดุงุก ุงูุนูููุฉ ุจูุฌุงุญ: ID 4
โ ุชู ูุนุงูุฌุฉ: 2 ุนูููุฉ
๐ฐ ุฅุฌูุงูู ุงูุนูููุงุช: $17.40
```

## ๐ ููููุฉ ุนูู ุงููุธุงู

### 1. ุชุชุจุน ุงูุฅุญุงูุงุช
- ุนูุฏ ุงูุชุณุฌูู ุจุฑุงุจุท ุฅุญุงูุฉ: `http://localhost:3000/register?ref=CODE`
- ูุชู ุญูุธ `user.referred_by = affiliate_user`

### 2. ูุนุงูุฌุฉ ุงูุนูููุงุช
- ุนูุฏ ูุฌุงุญ ุงูุฏูุน: `commission = payment_amount * 0.30`
- ุฅูุดุงุก ุณุฌู ุนูููุฉ ุจุญุงูุฉ `pending`
- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุดุฑูู

### 3. ุฏูุน ุงูุนูููุงุช
- ุชุญููู ุญุงูุฉ ุงูุนูููุงุช ูู `pending` ุฅูู `paid`
- ุชุญุฏูุซ `paid_at` timestamp
- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุดุฑูู

## ๐ ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ

### ุงูููุงู ุงููุฌุฏููุฉ:
- **ููููุงู 2:00 ุต**: ูุนุงูุฌุฉ ุงูุนูููุงุช ุงูุฌุฏูุฏุฉ
- **ููููุงู 3:00 ุต**: ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุดุฑูุงุก
- **ุฃุณุจูุนูุงู (ุงูุงุซููู 9:00 ุต)**: ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุดุฑูุงุก
- **ุดูุฑูุงู (ุฃูู ุงูุดูุฑ 1:00 ุต)**: ุชูุธูู ุงูุนูููุงุช ุงููุฏููุฉ

## ๐๏ธ ุงููููุงุช ุงููููุดุฃุฉ

### ุงูุณูุฑูุจุชุงุช:
- `process_affiliate_commissions.py` - ุงููุนุงูุฌ ุงูุชููุงุฆู ุงูุฑุฆูุณู
- `manual_commission_manager.py` - ุงููุฏูุฑ ุงูุชูุงุนูู
- `quick_commission_commands.py` - ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ
- `create_commission_test_data.py` - ุฅูุดุงุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ

### ููุงู Celery:
- `apps/affiliates/tasks.py` - ููุงู ุงููุนุงูุฌุฉ ุงูุชููุงุฆูุฉ
- `celery_schedule.py` - ุฅุนุฏุงุฏุงุช ุงูุฌุฏููุฉ

### ุงูุชูุซูู:
- `AFFILIATE_COMMISSION_GUIDE.md` - ุงูุฏููู ุงูุดุงูู
- `COMMISSION_SYSTEM_README.md` - ูุฐุง ุงูููู

## ๐ ูุฑุงูุจุฉ ุงููุธุงู

### ูุญุต ุณุฑูุน:
```bash
# ุญุงูุฉ ุงูุนูููุงุช
python quick_commission_commands.py summary

# ุชูุงุตูู ุดุฑูู
python quick_commission_commands.py details admin@example.com
```

### ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
python manage.py shell -c "
from apps.affiliates.models import AffiliateCommission
print(f'ุฅุฌูุงูู ุงูุนูููุงุช: {AffiliateCommission.objects.count()}')
print(f'ุงููุนููุฉ: {AffiliateCommission.objects.filter(status=\"pending\").count()}')
print(f'ุงููุฏููุนุฉ: {AffiliateCommission.objects.filter(status=\"paid\").count()}')
"
```

## ๐ก ูุตุงุฆุญ ููุงุณุชุฎุฏุงู

### ููุงุณุชุฎุฏุงู ุงููููู:
1. **ุชุดุบูู ูููู**: `python process_affiliate_commissions.py`
2. **ูุฑุงุฌุนุฉ ุณุฑูุนุฉ**: `python quick_commission_commands.py summary`
3. **ุฏูุน ุงูุนูููุงุช**: `python quick_commission_commands.py pay_all`

### ููุฅูุชุงุฌ:
1. **ุฅุนุฏุงุฏ Celery**: ูููุนุงูุฌุฉ ุงูุชููุงุฆูุฉ ุงููุฌุฏููุฉ
2. **ูุฑุงูุจุฉ ุงูุณุฌูุงุช**: ุชุชุจุน ุนูููุงุช ุงููุนุงูุฌุฉ
3. **ูุณุฎ ุงุญุชูุงุทูุฉ**: ููุจูุงูุงุช ุงููููุฉ

### ููุชุทููุฑ:
1. **ุจูุงูุงุช ุชุฌุฑูุจูุฉ**: `python create_commission_test_data.py`
2. **ุงุฎุชุจุงุฑ ุงููุนุงูุฌุฉ**: `python process_affiliate_commissions.py`
3. **ูุฑุงุฌุนุฉ ุงููุชุงุฆุฌ**: `python quick_commission_commands.py summary`

## ๐ฏ ุงูุญุงูุฉ ุงูุญุงููุฉ

### โ ูุง ุชู ุฅูุฌุงุฒู:
- โ ูุธุงู ุชุชุจุน ุงูุฅุญุงูุงุช
- โ ุญุณุงุจ ุงูุนูููุงุช 30% ุชููุงุฆูุงู
- โ ูุนุงูุฌุฉ ุงููุฏููุนุงุช ุงูุฌุฏูุฏุฉ
- โ ุฅุฏุงุฑุฉ ุญุงูุงุช ุงูุนูููุงุช (pending/paid)
- โ ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุดุฑูุงุก
- โ ุฃุฏูุงุช ุฅุฏุงุฑุฉ ูุชุนุฏุฏุฉ
- โ ููุงู Celery ููุชุดุบูู ุงูุชููุงุฆู
- โ ุชูุงุฑูุฑ ููุตูุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑ

### ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู:
ุงููุธุงู ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ!

## ๐ ุงูุฏุนู

### ุงููุดุงูู ุงูุดุงุฆุนุฉ:
1. **ูุง ุชูุฌุฏ ุนูููุงุช**: ุชุฃูุฏ ูู ูุฌูุฏ ูุฏููุนุงุช ูุงุฌุญุฉ ูุฅุญุงูุงุช
2. **Celery ูุง ูุนูู**: ุชุฃูุฏ ูู ุชุดุบูู Redis ูุงูุนุงูู
3. **ุฃุฎุทุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุชุฃูุฏ ูู ุชุทุจูู migrations

### ุงูุฃูุงูุฑ ุงููููุฏุฉ:
```bash
# ุฅุนุงุฏุฉ ุชุดุบูู ูู ุดูุก
python manage.py migrate
python create_commission_test_data.py
python process_affiliate_commissions.py

# ูุญุต ุดุงูู
python quick_commission_commands.py summary
```

---

**๐ ุชู ุฅููุงู ูุธุงู ุงูุนูููุงุช 30% ุจูุฌุงุญ!**  
**๐ ุงูุชุงุฑูุฎ**: ุฃูุชูุจุฑ 2025  
**๐ง ุงูุญุงูุฉ**: ุฌุงูุฒ ููุฅูุชุงุฌ โ
