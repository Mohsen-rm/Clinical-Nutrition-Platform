{"ast":null,"code":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nconst useAuthStore = create(persist((set, get) => ({\n  user: null,\n  isAuthenticated: false,\n  isLoading: false,\n  setUser: user => set({\n    user,\n    isAuthenticated: !!user\n  }),\n  setLoading: isLoading => set({\n    isLoading\n  }),\n  login: (userData, tokens) => {\n    localStorage.setItem('access_token', tokens.access);\n    localStorage.setItem('refresh_token', tokens.refresh);\n    set({\n      user: userData,\n      isAuthenticated: true,\n      isLoading: false\n    });\n  },\n  logout: () => {\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('refresh_token');\n    set({\n      user: null,\n      isAuthenticated: false,\n      isLoading: false\n    });\n  },\n  updateUser: userData => set({\n    user: userData\n  }),\n  // Check if user has active subscription\n  hasActiveSubscription: () => {\n    var _user$subscription;\n    const {\n      user\n    } = get();\n    return (user === null || user === void 0 ? void 0 : (_user$subscription = user.subscription) === null || _user$subscription === void 0 ? void 0 : _user$subscription.is_active) || false;\n  },\n  // Check if user is doctor\n  isDoctor: () => {\n    const {\n      user\n    } = get();\n    return (user === null || user === void 0 ? void 0 : user.user_type) === 'doctor';\n  },\n  // Check if user is patient\n  isPatient: () => {\n    const {\n      user\n    } = get();\n    return (user === null || user === void 0 ? void 0 : user.user_type) === 'patient';\n  }\n}), {\n  name: 'auth-storage',\n  partialize: state => ({\n    user: state.user,\n    isAuthenticated: state.isAuthenticated\n  })\n}));\nexport default useAuthStore;","map":{"version":3,"names":["create","persist","useAuthStore","set","get","user","isAuthenticated","isLoading","setUser","setLoading","login","userData","tokens","localStorage","setItem","access","refresh","logout","removeItem","updateUser","hasActiveSubscription","_user$subscription","subscription","is_active","isDoctor","user_type","isPatient","name","partialize","state"],"sources":["/Users/mohsen/Desktop/Clinical_Nutrition_Platform/frontend/src/store/authStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nconst useAuthStore = create(\n  persist(\n    (set, get) => ({\n      user: null,\n      isAuthenticated: false,\n      isLoading: false,\n\n      setUser: (user) => set({ user, isAuthenticated: !!user }),\n      \n      setLoading: (isLoading) => set({ isLoading }),\n\n      login: (userData, tokens) => {\n        localStorage.setItem('access_token', tokens.access);\n        localStorage.setItem('refresh_token', tokens.refresh);\n        set({ \n          user: userData, \n          isAuthenticated: true,\n          isLoading: false \n        });\n      },\n\n      logout: () => {\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('refresh_token');\n        set({ \n          user: null, \n          isAuthenticated: false,\n          isLoading: false \n        });\n      },\n\n      updateUser: (userData) => set({ user: userData }),\n\n      // Check if user has active subscription\n      hasActiveSubscription: () => {\n        const { user } = get();\n        return user?.subscription?.is_active || false;\n      },\n\n      // Check if user is doctor\n      isDoctor: () => {\n        const { user } = get();\n        return user?.user_type === 'doctor';\n      },\n\n      // Check if user is patient\n      isPatient: () => {\n        const { user } = get();\n        return user?.user_type === 'patient';\n      },\n    }),\n    {\n      name: 'auth-storage',\n      partialize: (state) => ({\n        user: state.user,\n        isAuthenticated: state.isAuthenticated,\n      }),\n    }\n  )\n);\n\nexport default useAuthStore;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,YAAY,GAAGF,MAAM,CACzBC,OAAO,CACL,CAACE,GAAG,EAAEC,GAAG,MAAM;EACbC,IAAI,EAAE,IAAI;EACVC,eAAe,EAAE,KAAK;EACtBC,SAAS,EAAE,KAAK;EAEhBC,OAAO,EAAGH,IAAI,IAAKF,GAAG,CAAC;IAAEE,IAAI;IAAEC,eAAe,EAAE,CAAC,CAACD;EAAK,CAAC,CAAC;EAEzDI,UAAU,EAAGF,SAAS,IAAKJ,GAAG,CAAC;IAAEI;EAAU,CAAC,CAAC;EAE7CG,KAAK,EAAEA,CAACC,QAAQ,EAAEC,MAAM,KAAK;IAC3BC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,MAAM,CAACG,MAAM,CAAC;IACnDF,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEF,MAAM,CAACI,OAAO,CAAC;IACrDb,GAAG,CAAC;MACFE,IAAI,EAAEM,QAAQ;MACdL,eAAe,EAAE,IAAI;MACrBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;EAEDU,MAAM,EAAEA,CAAA,KAAM;IACZJ,YAAY,CAACK,UAAU,CAAC,cAAc,CAAC;IACvCL,YAAY,CAACK,UAAU,CAAC,eAAe,CAAC;IACxCf,GAAG,CAAC;MACFE,IAAI,EAAE,IAAI;MACVC,eAAe,EAAE,KAAK;MACtBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;EAEDY,UAAU,EAAGR,QAAQ,IAAKR,GAAG,CAAC;IAAEE,IAAI,EAAEM;EAAS,CAAC,CAAC;EAEjD;EACAS,qBAAqB,EAAEA,CAAA,KAAM;IAAA,IAAAC,kBAAA;IAC3B,MAAM;MAAEhB;IAAK,CAAC,GAAGD,GAAG,CAAC,CAAC;IACtB,OAAO,CAAAC,IAAI,aAAJA,IAAI,wBAAAgB,kBAAA,GAAJhB,IAAI,CAAEiB,YAAY,cAAAD,kBAAA,uBAAlBA,kBAAA,CAAoBE,SAAS,KAAI,KAAK;EAC/C,CAAC;EAED;EACAC,QAAQ,EAAEA,CAAA,KAAM;IACd,MAAM;MAAEnB;IAAK,CAAC,GAAGD,GAAG,CAAC,CAAC;IACtB,OAAO,CAAAC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEoB,SAAS,MAAK,QAAQ;EACrC,CAAC;EAED;EACAC,SAAS,EAAEA,CAAA,KAAM;IACf,MAAM;MAAErB;IAAK,CAAC,GAAGD,GAAG,CAAC,CAAC;IACtB,OAAO,CAAAC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEoB,SAAS,MAAK,SAAS;EACtC;AACF,CAAC,CAAC,EACF;EACEE,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAGC,KAAK,KAAM;IACtBxB,IAAI,EAAEwB,KAAK,CAACxB,IAAI;IAChBC,eAAe,EAAEuB,KAAK,CAACvB;EACzB,CAAC;AACH,CACF,CACF,CAAC;AAED,eAAeJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}